# Список функций и необходимых доработок

## Описание проекта

Проект "MonOilStudy" представляет собой систему мониторинга и управления нефтепроводом. Система построена на модульной архитектуре с использованием Tkinter для пользовательского интерфейса и SQLite для хранения данных.

## Структура проекта

Проект разделен на следующие основные модули:

- **MonOilStudy test.py** - Основное приложение (скелет), объединяющее все модули
- **module1.py** - Модуль визуализации состояния ячеек трубопровода
- **module2.py** - Модуль визуализации данных из БД
- **module3.py** - Модуль генерации текстовых отчетов
- **module4.py** - Модуль авторизации пользователей
- **module6.py** - **НОВЫЙ** Модуль архива отчетов
- **module7.py** - Модуль управления базами данных (подключение, отключение)
- **module8.py** - Модуль управления активной БД
- **module9.py** - Модуль интерфейса подключения к БД
- **DB_man.py** и **DB man.py** - Модули для работы с базами данных

## Основные функции

1. **Подключение к базам данных**
   - Поддержка до 6 одновременных подключений
   - Мониторинг состояния подключений
   - Переключение между активными БД

2. **Мониторинг параметров трубопровода**
   - Температура (внутри и снаружи трубопровода)
   - Давление (внутри и снаружи трубопровода)
   - Скорость откачки
   - Угол наклона трубопровода
   - Вибрации трубопровода
   - Тип нефтепродукта (нефть, газ, мазут, дизель, бензин)

3. **Визуализация данных**
   - Индикаторы состояния трубопровода (модуль 1)
   - Шкалы для отображения значений параметров (модуль 2)
   - Текстовые отчеты (модуль 3)

4. **Генерация и архивирование отчетов**
   - **ОБНОВЛЕНО**: Автоматическое создание отчетов каждую минуту (модуль 3)
   - **НОВОЕ**: Архив отчетов с возможностью просмотра по датам (модуль 6)
   - Сохранение отчетов в формате txt в папке reports/
   - Возможность удаления старых отчетов

5. **Управление базами данных**
   - Подключение к различным типам БД (SQLite, PostgreSQL)
   - Нормализация данных в БД
   - Резервное копирование БД

6. **Система авторизации**
   - Модуль авторизации пользователей (модуль 4)
   - Различные уровни доступа
   - Блокировка/разблокировка модулей

## Последние изменения (версия 2.1)

### Модуль 3 - Генерация отчетов:
- ✅ **ИСПРАВЛЕНО**: Периодичность генерации отчетов изменена с 200мс на 60000мс (1 минута)
- ✅ **ДОБАВЛЕНО**: Автоматическое сохранение отчетов в txt файлы
- ✅ **ДОБАВЛЕНО**: Создание папки reports/ для хранения отчетов
- ✅ **УЛУЧШЕНО**: Данные берутся из подключенной БД и являются достоверными

### Модуль 6 - Архив отчетов (НОВЫЙ):
- ✅ **СОЗДАН**: Полностью новый модуль для работы с архивом отчетов
- ✅ **ФУНКЦИИ**: 
  - Просмотр списка всех сохраненных отчетов
  - Сортировка отчетов по дате (новые сверху)
  - Просмотр содержимого выбранного отчета
  - Удаление ненужных отчетов
  - Автоматическое обновление списка
- ✅ **ИНТЕРФЕЙС**: Двухпанельный интерфейс (список слева, содержимое справа)

### Общие улучшения:
- ✅ **ИСПРАВЛЕН**: Модуль 2 - устранены ошибки синтаксиса и отступов
- ✅ **СТАБИЛИЗИРОВАН**: Модуль 1 - решены проблемы с блокировкой БД
- ✅ **ИНТЕГРИРОВАН**: Модуль 6 в основное приложение

## Текущий статус модулей

- ✅ **Модуль 1**: Работает корректно, читает данные из БД
- ✅ **Модуль 2**: Исправлены все ошибки, работает стабильно
- ✅ **Модуль 3**: Генерирует отчеты каждую минуту, сохраняет в файлы
- ✅ **Модуль 4**: Работает корректно, авторизация пользователей
- ✅ **Модуль 6**: **НОВЫЙ** - архив отчетов, полностью функционален
- ✅ **Модуль 7**: Работает корректно, управление БД
- ✅ **Модуль 8**: Работает корректно, управление активной БД
- ✅ **Модуль 9**: Работает корректно, интерфейс подключения к БД

## Необходимые доработки

1. **Модуль 5**
   - Создать модуль 5 (пока не реализован)
   - Определить назначение модуля 5

2. **Улучшение архива отчетов (модуль 6)**
   - Добавить поиск отчетов по дате
   - Добавить экспорт отчетов в PDF
   - Добавить статистику по отчетам

3. **Улучшение интерфейса**
   - Добавить более современный и интуитивно понятный интерфейс
   - Улучшить отображение данных с использованием графиков
   - Добавить темную тему

4. **Расширение функциональности БД**
   - Добавить поддержку других СУБД (MySQL, Oracle)
   - Улучшить механизм резервного копирования
   - Внедрить автоматическую синхронизацию БД

5. **Мониторинг в реальном времени**
   - Добавить функцию мониторинга с использованием реальных данных (интеграция с API)
   - Внедрить механизм уведомлений о критических состояниях
   - Добавить мобильное приложение для мониторинга

## Приоритетные задачи

1. ✅ ~~Исправить ошибки в модуле 2~~ **ВЫПОЛНЕНО**
2. ✅ ~~Исправить периодичность генерации отчетов в модуле 3~~ **ВЫПОЛНЕНО**
3. ✅ ~~Создать модуль 6 для архива отчетов~~ **ВЫПОЛНЕНО**
4. Создать модуль 5
5. Добавить возможность экспорта данных в разные форматы (Excel, PDF)
6. Реализовать систему уведомлений о критических состояниях 